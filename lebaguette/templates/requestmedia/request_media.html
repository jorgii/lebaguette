{% extends "base/base.html" %}
{% load staticfiles %}
{% block title %}Lebaguette - Episodes list{% endblock %}
{% block body %}
  <div class="layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    <header class="header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600">
      <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">Get to work</span>
        <div class="mdl-layout-spacer"></div>
        <label id="logout" class="mdl-button mdl-js-button mdl-button--icon" for="search">
          <a href="/logout"><i class="material-icons">power_settings_new</i></a>
        </label>
        <div class="mdl-tooltip" for="logout">
          Bye bye
        </div>
      </div>
    </header>
    {% include "base/drawer.html" %}
    <main class="mdl-layout__content mdl-color--grey-100">
      <div class="mdl-grid container">
        {% if perms.requestmedia.add_request %}
          {% include "base/request_form.html" %}
        {% endif %}
        <div class="cards mdl-cell mdl-cell--12-col mdl-grid">
          <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col">
            {% include "base/requests_menu.html" %}
            <!-- NEW TAB START -->
            <div class="mdl-cell mdl-cell--12-col mdl-grid is-active" id="new-tab">
              <ul class="mdl-list mdl-cell mdl-cell--12-col" id="new-episodes">
                <li class="mdl-list__item mdl-list__item--two-line">
                  <span class="mdl-cell mdl-cell--6-col mdl-list__item-primary-content">
                    Episode name
                  </span>
                  <span class="mdl-cell mdl-cell--2-col mdl-list__item-primary-content">
                    Requested by
                  </span>
                  <span class="mdl-cell mdl-cell--2-col mdl-list__item-primary-content">
                    Requested on
                  </span>
                  {% if perms.requestmedia.approve %}
                  <span class="mdl-cell mdl-cell--1-col mdl-list__item-primary-content mdl-typography--text-center">
                    Approve
                  </span>
                  {% endif %}
                      {% if perms.requestmedia.reject %}
                  <span class="mdl-cell mdl-cell--1-col mdl-list__item-primary-content mdl-typography--text-center">
                    Reject
                  </span>
                  {% endif %}
                </li>
                {% for item in request_items %}
                <li class="mdl-list__item mdl-list__item--two-line" id="{{item.id}}">
                  <div class="mdl-cell mdl-cell--1-col mdl-grid">
                    <img class="poster__image mdl-cell mdl-cell--12-col" src="{{ item.get_media_item.get_poster_url }}" alt="{{ item.get_media_item }} poster" height="100%" width="auto">
                  </div>
                  <span class="mdl-cell mdl-cell--5-col mdl-list__item-primary-content">
                    <span>
                        {{ item.get_media_item }}
                    </span>
                    <span class="mdl-list__item-sub-title">{{ item.get_media_item.get_title }} aired on {{ item.get_media_item.get_released }}</span>
                  </span>
                  <span class="mdl-cell mdl-cell--2-col mdl-list__item-primary-content">
                    {{ item.requested_by.first_name }} {{ item.requested_by.last_name }}
                  </span>
                  <span class="mdl-cell mdl-cell--2-col mdl-list__item-primary-content">
                    {{ item.datetime_requested }}
                  </span>
                  {% if perms.requestmedia.approve %}
                  <span class="mdl-cell mdl-cell--1-col mdl-typography--text-center">
                    <button class="mdl-button mdl-js-button mdl-button--icon">
                      <i class="list__item-secondary-action material-icons episode__approve">check</i></a>
                    </button>
                  </span>
                  {% endif %}
                  {% if perms.requestmedia.reject %}
                  <span class="mdl-cell mdl-cell--1-col mdl-typography--text-center">
                    <button class="mdl-button mdl-js-button mdl-button--icon">
                      <i class="list__item-secondary-action material-icons episode__reject">clear</i></a>
                    </button>
                  </span>
                    {% endif %}
                </li>
                {% endfor %}
              </ul>
            </div>
            <!-- NEW TAB END -->
          </div>
        </div>
      </div>
      <div id="snackbar-error" class="mdl-js-snackbar mdl-snackbar snackbar__error">
        <div class="mdl-layout-spacer"></div>
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
        <div class="mdl-layout-spacer"></div>
      </div>
      <div id="snackbar-success" class="mdl-js-snackbar mdl-snackbar snackbar__success">
        <div class="mdl-layout-spacer"></div>
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
        <div class="mdl-layout-spacer"></div>
      </div>
    </main>
  </div>
  {% endblock %}
  {% block post_load %}
    <script type = "text/javascript" src="{% static "js/requestmedia.js" %}"></script>
  {% endblock %}
